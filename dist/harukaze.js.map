{"version":3,"sources":["harukaze.js","lib/actions.js","lib/debug.js","lib/dispatcher.js","lib/logger.js","lib/messages.js","lib/mixin.js","lib/store.js"],"names":["_","_require","debug","store","actions","messages","mixin","module","exports","extend","Mixin","logger","action","name","fn","logActionStart","arguments","promise","apply","logActionPromiseResult","enabled","Bacon","bus","Bus","dirtyStores","dispatching","dispatch","type","payload","Promise","reject","resolve","logMessage","push","pushChanges","logMessageEnd","input","payloads","filter","msg","map","markStoreAsDirty","contains","pushChangesOnce","stores","each","changes","output","length","logNoDirtyStores","also","logDirtyStores","args","console","group","then","res","log","groupEnd","err","stack","process","nextTick","rethrow","pluck","join","dispatcher","message","bind","React","wire","arg","component","harukaze","_harukaze","unsubscribers","unsubscribe","isFunction","onValue","isArray","setState","pick","componentWillUnmount","f","displayName","spec","obj","methods","gatherStoreMethods","bindStoreMethods","wireStore","keys","key","stream","property","value"],"mappings":"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","file":"harukaze.js","sourceRoot":"/source/","sourcesContent":["var _ = require('lodash');\n\nvar debug = require('./lib/debug');\nvar store = require('./lib/store');\nvar actions = require('./lib/actions');\nvar messages = require('./lib/messages');\nvar mixin = require('./lib/mixin');\n\nmodule.exports = _.extend({}, debug, store, actions, messages, {\n  Mixin: mixin\n});\n","'use strict';\n\nvar logger = require('./logger');\n\nfunction action(name, fn) {\n  return function () {\n    logger.logActionStart(name, arguments);\n    var promise = fn.apply(action, arguments);\n    logger.logActionPromiseResult(name, promise);      \n    return promise;   \n  };\n}\n\nmodule.exports = {\n  action: action\n};\n","'use strict';\n\nvar enabled = false;\n\nmodule.exports = {\n  debug: {\n    enabled: enabled    \n  }\n};\n","'use strict';\n\nvar _ = require('lodash');\nvar Bacon = require('baconjs');\nvar logger = require('./logger');\n\nvar bus = new Bacon.Bus();\nvar dirtyStores = [];\nvar dispatching = false;\n\nfunction dispatch(type, payload) {\n  if (dispatching) {\n    return Promise.reject('Cascading dispatches are prohibited. Fix your flux.');\n  }\n  return new Promise(function (resolve, reject) {\n    dispatching = true;\n    logger.logMessage(type, payload);\n    try {\n      bus.push({type: type, payload: payload});\n      pushChanges();\n      resolve();\n    } finally {\n      logger.logMessageEnd();\n      dispatching = false;\n    }\n  });\n}\n\nfunction input(type) {\n  var payloads = bus.filter(function (msg) {\n     return msg.type === type;\n  }).map('.payload');\n  return payloads;\n}\n\nfunction markStoreAsDirty(store) {\n  if (!_.contains(dirtyStores, store)) {\n    dirtyStores.push(store);    \n  }\n}\n\nfunction pushChangesOnce() {\n  var stores = dirtyStores;\n  dirtyStores = [];\n  _.each(stores, function (store) {\n    store.changes.push(store.output);      \n  });\n}\n\nfunction pushChanges() {\n  if (!dirtyStores.length) {\n    logger.logNoDirtyStores();\n    return;\n  }\n  var also = false;\n  while(dirtyStores.length > 0) {\n    logger.logDirtyStores(dirtyStores, also);\n    pushChangesOnce();\n    also = true;\n  }\n}\n\nmodule.exports = {\n  dispatch: dispatch,\n  input: input,\n  markStoreAsDirty: markStoreAsDirty\n};\n","'use strict';\n\nvar _ = require('lodash');\nvar debug = require('./debug').debug;\n\nmodule.exports = {\n  logActionStart: function (name, args) {\n    if (!debug.enabled) { return; }\n    if (!args.length) {\n      console.group('ACTION %s', name);     \n    } else {\n      console.group('ACTION %s: %o', name, args);           \n    }\n  },\n\n  logActionPromiseResult: function (name, promise) {\n    if (!debug.enabled) { return; }\n    promise.then(function(res) {\n      console.log('[OK] %o', res);\n      console.groupEnd();\n    }, function(err) {\n      if (err.stack) {\n        console.log('[ERR, RETHROWN] %s', err);\n        process.nextTick(function rethrow() { throw err; });        \n      } else {\n        console.log('[ERR] %o', err);        \n      }\n      console.groupEnd();\n    });\n  },\n\n  logMessage: function (name, payload) {\n    if (!debug.enabled) { return; }\n    if (payload) {\n      console.group('MESSAGE %s: %o', name, payload);\n    } else {\n      console.group('MESSAGE %s', name);    \n    }\n  },\n  \n  logDirtyStores: function (dirtyStores, also) {\n    if (!debug.enabled) { return; }\n    if (dirtyStores.length) {\n      console.log(\"%sCHANGED STORES: %s\", (also ? 'ALSO ' : ''), _.pluck(dirtyStores, 'displayName').join(', '));\n    } else {\n      console.log(\"NO STORES CHANGED.\");\n    }\n  },\n\n  logNoDirtyStores: function () {\n    if (!debug.enabled) { return; }\n    console.log(\"NO STORES CHANGED.\");\n  },\n\n  logMessageEnd: function () {\n    if (!debug.enabled) { return; }\n    console.groupEnd();\n  }\n};\n","'use strict';\n\nvar dispatcher = require('./dispatcher');\n\nfunction message(type) {\n  return dispatcher.dispatch.bind(dispatcher, type);\n}\n\nmodule.exports = {\n  message: message\n};\n","'use strict';\n\nvar _ = require('lodash');\nvar React = require('react');\n\nvar Mixin = {\n  wire: function(store, arg) {\n    var component = this;\n    var harukaze = this._harukaze = this._harukaze || {};\n    var unsubscribers = harukaze.unsubscribers = harukaze.unsubscribers || [];\n    var unsubscribe = null;\n    \n    if (_.isFunction(arg)) {\n      unsubscribe = store.changes.onValue(arg);\n    } else if (_.isArray(arg)) {\n      unsubscribe = store.changes.onValue(function (output) {\n        component.setState(_.pick(output, arg));\n      })\n    }\n    \n    unsubscribers.push(unsubscribe);\n    return unsubscribe;\n  },\n\n  componentWillUnmount: function() {\n    var harukaze = this._harukaze;\n    if (harukaze) {\n      var unsubscribers = harukaze.unsubscribers;\n      if (unsubscribers) {\n        _.each(unsubscribers, function (f) { f(); });\n      }\n    }  \n  }\n};\n\nmodule.exports = Mixin;\n","'use strict';\n\nvar _ = require('lodash');\nvar Bacon = require('baconjs');\nvar dispatcher = require('./dispatcher');\n\nfunction store(displayName, spec) {\n  var changes = new Bacon.Bus();  \n  var obj = {\n    displayName: displayName,\n    output: _.extend({}, spec.output),\n    changes: changes\n  };\n  \n  var methods = gatherStoreMethods(spec);\n  bindStoreMethods(spec, obj, methods);\n  wireStore(spec, obj, dispatcher.input);\n  return obj;\n}\n\nfunction gatherStoreMethods(spec) {\n  return _.reject(_.keys(spec), function (key) {\n    return _.contains(['output'], key);\n  });\n}\n\nfunction bindStoreMethods(spec, store, methods) {\n  _.each(methods, function(key) {\n    store[key] = _.bind(spec[key], store);\n  });\n}\n\nfunction wireStore(spec, store, input) {\n  function output(stream, property) {\n    stream.onValue(function (value) {\n      if (store.output[property] != value) {\n        store.output[property] = value;\n        dispatcher.markStoreAsDirty(store);        \n      }\n    });\n  }\n  store.wire(input, output);\n} \n  \nmodule.exports = {\n  store: store\n};\n"]}