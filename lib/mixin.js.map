{"version":3,"sources":["../src/mixin.js"],"names":[],"mappings":";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;;AAE7B,IAAI,KAAK,GAAG;AACV,MAAI,EAAE,cAAS,KAAK,EAAE,GAAG,EAAE;AACzB,QAAI,SAAS,GAAG,IAAI,CAAC;AACrB,QAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,IAAI,EAAE,CAAC;AACrD,QAAI,aAAa,GAAG,QAAQ,CAAC,aAAa,GAAG,QAAQ,CAAC,aAAa,IAAI,EAAE,CAAC;AAC1E,QAAI,WAAW,GAAG,IAAI,CAAC;;AAEvB,QAAI,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE;AACrB,iBAAW,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;KAC1C,MAAM,IAAI,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;AACzB,iBAAW,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,MAAM,EAAE;AACpD,iBAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC;OACzC,CAAC,CAAA;KACH;;AAED,iBAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAChC,WAAO,WAAW,CAAC;GACpB;;AAED,sBAAoB,EAAE,gCAAW;AAC/B,QAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC;AAC9B,QAAI,QAAQ,EAAE;AACZ,UAAI,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC;AAC3C,UAAI,aAAa,EAAE;AACjB,SAAC,CAAC,IAAI,CAAC,aAAa,EAAE,UAAU,CAAC,EAAE;AAAE,WAAC,EAAE,CAAC;SAAE,CAAC,CAAC;OAC9C;KACF;GACF;CACF,CAAC;;AAEF,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC","file":"mixin.js","sourcesContent":["var _ = require('lodash');\nvar React = require('react');\n\nvar Mixin = {\n  wire: function(store, arg) {\n    var component = this;\n    var harukaze = this._harukaze = this._harukaze || {};\n    var unsubscribers = harukaze.unsubscribers = harukaze.unsubscribers || [];\n    var unsubscribe = null;\n    \n    if (_.isFunction(arg)) {\n      unsubscribe = store.changes.onValue(arg);\n    } else if (_.isArray(arg)) {\n      unsubscribe = store.changes.onValue(function (output) {\n        component.setState(_.pick(output, arg));\n      })\n    }\n    \n    unsubscribers.push(unsubscribe);\n    return unsubscribe;\n  },\n\n  componentWillUnmount: function() {\n    var harukaze = this._harukaze;\n    if (harukaze) {\n      var unsubscribers = harukaze.unsubscribers;\n      if (unsubscribers) {\n        _.each(unsubscribers, function (f) { f(); });\n      }\n    }  \n  }\n};\n\nmodule.exports = Mixin;\n"]}